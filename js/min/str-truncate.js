/** Truncates a block of text to a designated number of characters or words, returning the split result as an array. */
function truncate(t){if(arguments.length<2||!t)return[t||""];var e={limit:25,by:"char",cutoff:"break",trim:true};if("number"===typeof arguments[1])e.limit=arguments[1];else for(var r in arguments[1])e[r]=arguments[1][r];e.by=e.by.toLowerCase();e.cutoff="string"===typeof e.cutoff?e.cutoff.toLowerCase():+e.cutoff;if(e.trim)t=t.replace(/(^\s+|\s+$)/g,"");if("word"===e.by){var n=t.split(/\s+/);if(n.length<=e.limit)return[t];return[n.slice(0,e.limit).join(" "),n.slice(e.limit).join(" ")]}else{if(t.length<e.limit)return[t];if(!e.cutoff||"break"===e.cutoff||/\s/.test(t[e.limit]))return[t.substring(0,e.limit),t.substring(e.limit)];var i=t.substring(0,e.limit),u=t.substring(e.limit),f=i.match(/(\s*)(\S+)$/),s=u.match(/^\S+/);if("after"===e.cutoff)return[t.substring(0,i.length+s[0].length),t.substring(i.length+s[0].length)];else if("before"===e.cutoff)return[t.substring(0,i.length-f[0].length),t.substring(i.length-f[0].length)];else{var l=f[2]+s;if(e.cutoff>0&&e.cutoff<1)e.cutoff=Math.round(l.length*e.cutoff);if(e.limit>i.length-f[2].length+e.cutoff)return[t.substring(0,i.length-f[0].length),t.substring(i.length-f[0].length)];return[t.substring(0,i.length+s[0].length),t.substring(i.length+s[0].length)]}}return[t]}